<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin â€“ Manage Products</title>
  <script src="./usingtw.js"></script>
</head>

<body class="bg-gray-100 p-6">

  <div class="max-w-3xl mx-auto bg-white p-6 shadow rounded">
    <h1 class="text-3xl font-bold mb-4">ðŸ›  Store Owner â€“ Add Products</h1>

    <div class="space-y-4">
      <input id="pTitle" class="w-full border p-3 rounded" placeholder="Product Name">

      <input id="pPrice" type="number" class="w-full border p-3 rounded" placeholder="Price (NGN)">

      <input id="pCategory" class="w-full border p-3 rounded" placeholder="Category">

      <textarea id="pDesc" class="w-full border p-3 rounded" placeholder="Description"></textarea>

      <input id="pImage" type="file" accept="image/*" class="w-full">

      <button onclick="addProduct()" class="w-full bg-black text-white py-3 rounded mt-2">
        Add Product
      </button>
    </div>

    <h2 class="text-xl font-bold mt-8 mb-4">ðŸ“¦ Products</h2>

    <div id="productList" class="space-y-3"></div>
  </div>

<script>
function addProduct() {
    const title = document.getElementById("pTitle").value;
    const price = document.getElementById("pPrice").value;
    const category = document.getElementById("pCategory").value;
    const desc = document.getElementById("pDesc").value;
    const imgInput = document.getElementById("pImage").files[0];

    if (!title || !price || !imgInput) {
        alert("Name, price, and image are required");
        return;
    }

    // Convert image to Base64
    const reader = new FileReader();
    reader.onload = function () {
        const imgData = reader.result;

        const newProduct = {
            id: Date.now(),
            title,
            price: Number(price),
            category,
            desc,
            img: imgData
        };

        let products = JSON.parse(localStorage.getItem("products")) || [];
        products.push(newProduct);
        localStorage.setItem("products", JSON.stringify(products));

        loadProducts();
        alert("Product added!");
    };

    reader.readAsDataURL(imgInput);
}

function loadProducts() {
    const container = document.getElementById("productList");
    const products = JSON.parse(localStorage.getItem("products")) || [];

    container.innerHTML = products.map(p => `
        <div class="p-4 bg-gray-100 rounded shadow flex justify-between items-center">
            <div>
                <p class="font-bold">${p.title}</p>
                <p>â‚¦${p.price.toLocaleString()}</p>
                <p class="text-sm text-gray-500">${p.category}</p>
            </div>
            <button onclick="deleteProduct(${p.id})" class="bg-red-600 text-white px-3 py-1 rounded">
                Delete
            </button>
        </div>
    `).join("");
}

function deleteProduct(id) {
    let products = JSON.parse(localStorage.getItem("products")) || [];
    products = products.filter(p => p.id !== id);
    localStorage.setItem("products", JSON.stringify(products));
    loadProducts();
}

document.addEventListener("DOMContentLoaded", loadProducts);
</script>

</body>
</html>