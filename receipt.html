<!DOCTYPE html>
<html>
<head>
    <title>Order Receipt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./usingtw.js"></script>
</head>
<body class="bg-gray-100 p-6">

    <div class="max-w-xl mx-auto bg-white shadow p-6 rounded">
        <h1 class="text-2xl font-bold mb-4 text-center">Payment Receipt</h1>

        <div id="receiptBox" class="text-gray-700 space-y-2"></div>

        <a href="index.html" class="block mt-6 text-center bg-black text-white py-3 rounded">
            Back to Home
        </a>
    </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(window.location.search);
    const ref = params.get("ref");

    const orders = JSON.parse(localStorage.getItem("orders")) || [];
    const order = orders.find(o => o.paymentRef === ref);

    if (!order) {
        document.getElementById("receiptBox").innerHTML = 
            "<p class='text-red-500'>Invalid receipt reference.</p>";
        return;
    }

    let itemsHTML = order.cart.map(item => `
        <li>${item.title} × ${item.qty} — ₦${(item.price * item.qty).toLocaleString()}</li>
    `).join("");

    document.getElementById("receiptBox").innerHTML = `
        <p><strong>Order ID:</strong> ${order.orderId}</p>
        <p><strong>Date:</strong> ${order.date}</p>
        <p><strong>Status:</strong> <span class="text-green-600">Payment Successful</span></p>
        <p><strong>Payment Ref:</strong> ${order.paymentRef}</p>

        <hr class="my-3">

        <p><strong>Name:</strong> ${order.name}</p>
        <p><strong>Phone:</strong> ${order.phone}</p>
        <p><strong>Email:</strong> ${order.email}</p>
        <p><strong>Address:</strong> ${order.address}</p>

        <hr class="my-3">

        <p class="font-semibold">Items:</p>
        <ul class="list-disc ml-6">${itemsHTML}</ul>

        <hr class="my-3">

        <p><strong>Total Paid:</strong> ₦${order.total.toLocaleString()}</p>
    `;
});
</script>

</body>
</html>